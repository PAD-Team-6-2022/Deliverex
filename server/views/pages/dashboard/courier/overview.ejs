<!DOCTYPE html>
<html lang="en" class="bg-slate-50">
<head>
    <%- include("../../../partials/head", {js: "courier/overview"}) %>
</head>
<body>
<div class="flex">
    <%- include("../../../partials/dashboard/sidebar", { isShopOwner: false }) %>
    <div class="max-w-7xl mx-auto px-4 mt-16 flex-1 overflow-hidden">
        <div class="text-center sm:text-left">
            <h1 class="font-bold text-3xl sm:text-4xl text-slate-800">Shipments overview</h1>
            <%if(orders.length > 0){%>
                <p class="text-lg sm:text-xl font-medium text-slate-500 mt-3 max-w-sm inline-block">View today's travel route, or update an order's status using the QR code scanner.</p>
            <%}else{%>
                <p class="text-lg sm:text-xl font-medium text-slate-500 mt-3 max-w-sm inline-block">You currently have no shipments to be delivered.</p>
            <%}%>
            <%if(daySchedule !== null){%>
                <p class="text-sm sm:text-xl font-medium text-slate-500 mt-3 max-w-sm inline-block">You are scheduled to work today <br>from <b><%= daySchedule.start %></b> to <b><%= daySchedule.end %></b>.</p>
            <%}else{%>
                <p class="text-sm sm:text-xl font-medium text-slate-500 mt-3 max-w-sm inline-block">You are not scheduled to work today.</p>
            <%}%>
        </div>

        <div id="subscribeButtonContainer" class="flex mt-8 mb-4 flex-col items-center sm:items-start hidden">
            <h2 class="text-center">You are currently offline. Turn on notifications to receive order requests.</h2>
            <button id="subscribeButton"><a class="text-blue-500" style="color: blue; text-decoration: underline;">Turn on notifications</a></button>
        </div>

        <%if(orders.length > 0 && daySchedule !== null){ %>
        <div id="button-container" class="flex flex-wrap mt-8 mb-4 items-center flex-col sm:justify-start sm:flex-row hidden">
            <a>
                <button id="viewRouteButton" type="button" class="mb-3 sm:mb-0 sm:mr-8 bg-cyan-500 hover:bg-cyan-700 text-white text-xl font-normal py-2 px-4 rounded-lg flex transition-colors">
                    <?xml version="1.0" encoding="utf-8"?>
                    <!--<svg class="mr-3" version="1.1" id="Layer_1" width="24" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 122.88 122.88" style="enable-background:new 0 0 122.88 122.88" xml:space="preserve"><g>
                        <path d="M68.23,13.49c10.44,1.49,19.79,6.36,26.91,13.48c7.29,7.29,12.23,16.93,13.58,27.68h14.17v13.58h-14.39 c-1.62,10.13-6.42,19.2-13.36,26.13c-7.11,7.11-16.47,11.99-26.91,13.48v15.04H54.65v-15.04c-10.44-1.49-19.79-6.36-26.9-13.48 c-6.94-6.94-11.74-16-13.36-26.13H0V54.65h14.16c1.35-10.75,6.29-20.39,13.58-27.68c7.11-7.11,16.46-11.99,26.9-13.48V0h13.58 V13.49L68.23,13.49z M61.44,35.41c13.95,0,25.25,11.31,25.25,25.25c0,13.95-11.31,25.25-25.25,25.25 c-13.95,0-25.25-11.31-25.25-25.25C36.19,46.72,47.49,35.41,61.44,35.41L61.44,35.41z M89,33.11c-7.05-7.05-16.8-11.42-27.56-11.42 c-10.76,0-20.51,4.36-27.56,11.42c-7.05,7.05-11.42,16.8-11.42,27.56c0,10.76,4.36,20.51,11.42,27.56 c7.05,7.05,16.8,11.42,27.56,11.42c10.76,0,20.51-4.36,27.56-11.42c7.05-7.05,11.42-16.8,11.42-27.56 C100.41,49.9,96.05,40.16,89,33.11L89,33.11z"/></g>
                    </svg>-->

                    <!--<svg class="mr-3" data-name="Layer 1" width="24" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 122.88 122.88">
                        <path d="M61.44,0A61.46,61.46,0,1,1,18,18,61.23,61.23,0,0,1,61.44,0Zm5.25,73.85-3.64-3.69-.15,0a8.38,8.38,0,0,1-.88,0,8.86,8.86,0,0,1-8.88-8.87,9.2,9.2,0,0,1,0-.94l0-.2-4-4L37.88,85.29,66.69,73.85Zm-2.22-6L70,73.4l1.43,1.43L33.17,90,48.28,51.41l7.82,7.92L56,60a5.67,5.67,0,0,0-.11.66c0,.24,0,.46,0,.66A6.23,6.23,0,0,0,62,67.56l.62,0a5.77,5.77,0,0,0,.62-.09l.7-.14.51.51ZM58.52,55.18l-6.3-6.39.42-.85.7-.64L89.71,32.85,74.61,71.47l-7.07-7.16.3-.79a5.85,5.85,0,0,0,.29-1.07,7.14,7.14,0,0,0,.1-1.1A6.23,6.23,0,0,0,62,55.14a6.56,6.56,0,0,0-1.08.09,5.45,5.45,0,0,0-1,.27l-.8.29-.6-.61ZM96.58,26.3a49.71,49.71,0,1,0,14.55,35.14A49.57,49.57,0,0,0,96.58,26.3Z"/>
                    </svg>-->

                    <svg class="mr-3" version="1.1" id="Layer_1" width="24" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 122.88 117.55" style="enable-background:new 0 0 122.88 117.55" xml:space="preserve">
                        <style type="text/css">.st0{fill-rule:evenodd;clip-rule:evenodd;}</style>
                            <g><path class="st0" d="M78.81,82.78c-4.35,4.77-9.42,9.05-15.12,12.51c-0.7,0.51-1.65,0.58-2.43,0.08 c-8.41-5.35-15.48-11.78-21.03-18.76c-7.66-9.61-12.49-20.27-14.14-30.53c-1.68-10.41-0.11-20.42,5.07-28.56 c2.04-3.22,4.65-6.15,7.83-8.68C46.3,3.01,54.65-0.06,62.96,0c8.01,0.06,15.91,3.05,22.74,9.28c2.4,2.18,4.42,4.68,6.07,7.39 c5.57,9.17,6.77,20.87,4.32,32.73c-2.41,11.71-8.41,23.62-17.28,33.35V82.78L78.81,82.78L78.81,82.78z M25.32,74.54 c1.98,0,3.59,1.61,3.59,3.59c0,1.98-1.61,3.59-3.59,3.59h-6.74l-8.88,28.67h103.22l-9.64-28.67h-5.57c-1.98,0-3.59-1.61-3.59-3.59 c0-1.98,1.61-3.59,3.59-3.59h10.7l14.46,43.01H0l13.32-43.01H25.32L25.32,74.54z M61.38,18.51c9.88,0,17.88,8.01,17.88,17.87 c0,9.88-8.01,17.88-17.88,17.88c-9.88,0-17.87-8-17.87-17.88C43.49,26.51,51.5,18.51,61.38,18.51L61.38,18.51L61.38,18.51z"/></g>
                    </svg>

                    <span>
                        Get route directions
                    </span>
                </button>
            </a>
            <a href="/dashboard/scan">
                <button id="updateShipmentButton" type="button" class="bg-cyan-500 hover:bg-cyan-700 text-white text-xl font-normal py-2 px-4 rounded-lg flex transition-colors">
                    <?xml version="1.0" encoding="utf-8"?>
                    <svg class="mr-3" version="1.1" fill="black" width="24" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 122.88 122.7" style="enable-background:new 0 0 122.88 122.7" xml:space="preserve">
                        <style type="text/css">.st0{fill-rule:evenodd;clip-rule:evenodd;}</style>
                        <g>
                            <path class="st0" d="M0.18,0h44.63v44.45H0.18V0L0.18,0z M111.5,111.5h11.38v11.2H111.5V111.5L111.5,111.5z M89.63,111.48h11.38 v10.67H89.63h-0.01H78.25v-21.82h11.02V89.27h11.21V67.22h11.38v10.84h10.84v11.2h-10.84v11.2h-11.21h-0.17H89.63V111.48 L89.63,111.48z M55.84,89.09h11.02v-11.2H56.2v-11.2h10.66v-11.2H56.02v11.2H44.63v-11.2h11.2V22.23h11.38v33.25h11.02v11.2h10.84 v-11.2h11.38v11.2H89.63v11.2H78.25v22.05H67.22v22.23H55.84V89.09L55.84,89.09z M111.31,55.48h11.38v11.2h-11.38V55.48 L111.31,55.48z M22.41,55.48h11.38v11.2H22.41V55.48L22.41,55.48z M0.18,55.48h11.38v11.2H0.18V55.48L0.18,55.48z M55.84,0h11.38 v11.2H55.84V0L55.84,0z M0,78.06h44.63v44.45H0V78.06L0,78.06z M10.84,88.86h22.95v22.86H10.84V88.86L10.84,88.86z M78.06,0h44.63 v44.45H78.06V0L78.06,0z M88.91,10.8h22.95v22.86H88.91V10.8L88.91,10.8z M11.02,10.8h22.95v22.86H11.02V10.8L11.02,10.8z"/>
                        </g>
                    </svg>
                    <span>
                        Update shipment
                    </span>
                </button>
            </a>
        </div>

        <h2 class="font-medium text-2xl text-slate-800 my-4 flex">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="-2 -4 24 24" width="24" fill="currentColor">
                <path
                        d="M3 0h14a3 3 0 0 1 3 3v10a3 3 0 0 1-3 3H3a3 3 0 0 1-3-3V3a3 3 0 0 1 3-3zm0 2a1 1 0 0 0-1 1v10a1 1 0 0 0 1 1h14a1 1 0 0 0 1-1V3a1 1 0 0 0-1-1H3zm10.874 5a4.002 4.002 0 0 1-7.748 0H2V5h16v2h-4.126zm-2.142 0H8.268a2 2 0 0 0 3.464 0z">
                </path>
            </svg>
            <span class="ml-3">Checkpoints</span>
        </h2>
        <div class="-my-2 overflow-x-auto sm:-mx-6 lg:-mx-8">
            <div class="py-2 align-middle inline-block min-w-full sm:px-6 lg:px-8">
                <div class="border border-slate-200 rounded-lg">
                    <table class="min-w-full divide-y divide-slate-200 overflow-hidden rounded-lg">
                        <thead>
                        <tr class="bg-slate-100">
                            <th data-order-toggle="id" scope="col"
                                class="px-6 py-3 text-left text-xs font-medium text-slate-500 tracking-wider">
                                <span class="flex items-center">
                                  #
                                </span>
                            </th>
                            <th data-order-toggle="weight" scope="col"
                                class="px-6 py-3 text-left text-xs font-medium text-slate-500 tracking-wider">
                                <span class="flex">
                                  Type
                                </span>
                            </th>
                            <th data-order-toggle="address" scope="col"
                                class="px-6 py-3 text-left text-xs font-medium text-slate-500 tracking-wider">
                                <span class="flex">
                                  Address
                                </span>
                            </th>
                            <th data-order-toggle="postal code" scope="col"
                                class="px-6 py-3 text-left text-xs font-medium text-slate-500 tracking-wider">
                                <span class="flex">
                                  Postal code
                                </span>
                            </th>
                            <th data-order-toggle="city" scope="col"
                                class="px-6 py-3 text-left text-xs font-medium text-slate-500 tracking-wider">
                                <span class="flex">
                                  City
                                </span>
                            </th>
                            <th data-order-toggle="country" scope="col"
                                class="px-6 py-3 text-left text-xs font-medium text-slate-500 tracking-wider">
                                <span class="flex">
                                  Country
                                </span>
                            </th>
                            <th data-order-toggle="order_id" scope="col"
                                class="px-6 py-3 text-left text-xs font-medium text-slate-500 tracking-wider">
                                <span class="flex">
                                  OrderDao ID
                                </span>
                            </th>
                            <th data-order-toggle="duration" scope="col"
                                class="px-6 py-3 text-left text-xs font-medium text-slate-500 tracking-wider">
                                <span class="flex">
                                  Time
                                </span>
                            </th>
                        </tr>
                        </thead>
                        <tbody id="checkpointsTable" class="bg-slate-100 divide-y divide-slate-200">
                        <%for(let i = 0; i < (orders.length*2); i++){%>
                            <tr class="order checkpoint text-slate-500 bg-white">
                                <td class="px-6 py-4 whitespace-nowrap ">
                                    <div class="loading-pulse animate-pulse rounded-full bg-slate-200 h-5 w-full"></div>
                                    <div class="flex items-center ">
                                        <div class="indexContainer text-sm font-medium text-slate-900 inline-block">

                                        </div>
                                    </div>
                                </td>
                                <td class="px-6 py-4 whitespace-nowrap">
                                    <div class="loading-pulse animate-pulse rounded-full bg-slate-200 h-5 w-full"></div>
                                    <div class="flex items-center">
                                        <div class="typeContainer text-sm font-medium text-slate-900">

                                        </div>
                                    </div>
                                </td>
                                <td class="px-6 py-4 whitespace-nowrap">
                                    <div class="loading-pulse animate-pulse rounded-full bg-slate-200 h-5 w-full"></div>
                                    <div class="flex items-center">
                                        <div class="addressContainer text-sm font-medium text-slate-900">

                                        </div>
                                    </div>
                                </td>
                                <td class="px-6 py-4 whitespace-nowrap">
                                    <div class="loading-pulse animate-pulse rounded-full bg-slate-200 h-5 w-full"></div>
                                    <div class="flex items-center">
                                        <div class="postalCodeContainer text-sm font-medium text-slate-900">

                                        </div>
                                    </div>
                                </td>
                                <td class="px-6 py-4 whitespace-nowrap">
                                    <div class="loading-pulse animate-pulse rounded-full bg-slate-200 h-5 w-full"></div>
                                    <div class="flex items-center">
                                        <div class="cityContainer text-sm font-medium text-slate-900">

                                        </div>
                                    </div>
                                </td>
                                <td class="px-6 py-4 whitespace-nowrap">
                                    <div class="loading-pulse animate-pulse rounded-full bg-slate-200 h-5 w-full"></div>
                                    <div class="flex items-center">
                                        <div class="countryContainer text-sm font-medium text-slate-900">

                                        </div>
                                    </div>
                                </td>
                                <td class="px-6 py-4 whitespace-nowrap">
                                    <div class="loading-pulse animate-pulse rounded-full bg-slate-200 h-5 w-full"></div>
                                    <div class="flex items-center">
                                        <div class="orderIdContainer text-sm font-medium text-slate-900">

                                        </div>
                                    </div>
                                </td>
                                <td class="px-6 py-4 whitespace-nowrap">
                                    <div class="loading-pulse animate-pulse rounded-full bg-slate-200 h-5 w-full"></div>
                                    <div class="flex items-center">
                                        <div class="timeContainer text-sm font-medium text-slate-900">

                                        </div>
                                    </div>
                                </td>
                            </tr>
                        <%}%>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>

        <h2 class="font-medium text-2xl text-slate-800 mb-4 mt-8 flex">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="-2 -4 24 24" width="24" fill="currentColor">
                <path
                        d="M3 0h14a3 3 0 0 1 3 3v10a3 3 0 0 1-3 3H3a3 3 0 0 1-3-3V3a3 3 0 0 1 3-3zm0 2a1 1 0 0 0-1 1v10a1 1 0 0 0 1 1h14a1 1 0 0 0 1-1V3a1 1 0 0 0-1-1H3zm10.874 5a4.002 4.002 0 0 1-7.748 0H2V5h16v2h-4.126zm-2.142 0H8.268a2 2 0 0 0 3.464 0z">
                </path>
            </svg>
            <span class="ml-3">OrderDao & customer info</span>
        </h2>
        <div class="-my-2 mb-8 overflow-x-auto sm:-mx-6 lg:-mx-8">
            <div class="py-2 align-middle inline-block min-w-full sm:px-6 lg:px-8">
                <div class="overflow-hidden border-b border-slate-200">
                    <table class="min-w-full divide-y divide-slate-200">
                        <thead>
                        <tr class="bg-slate-200">
                            <th data-order-toggle="id" scope="col"
                                class="px-6 py-3 text-left text-xs font-medium text-slate-500 tracking-wider">
                                <span class="flex items-center">
                                  Id
                                </span>
                            </th>
                            <th data-order-toggle="weight" scope="col"
                                class="px-6 py-3 text-left text-xs font-medium text-slate-500 tracking-wider">
                                <span class="flex">
                                  Weight
                                </span>
                            </th>
                            <th data-order-toggle="status" scope="col"
                                class="px-6 py-3 text-left text-xs font-medium text-slate-500 tracking-wider">
                                <span class="flex">
                                  Status
                                </span>
                            </th>
                            <th data-order-toggle="email" scope="col"
                                class="px-6 py-3 text-left text-xs font-medium text-slate-500 tracking-wider">
                                <span class="flex">
                                  Email address
                                </span>
                            </th>
                            <th data-order-toggle="phonenumber" scope="col"
                                class="px-6 py-3 text-left text-xs font-medium text-slate-500 tracking-wider">
                                <span class="flex">
                                  Phonenumber
                                </span>
                            </th>
                        </tr>
                        </thead>
                        <tbody id="ordersTable" class="bg-white divide-y divide-slate-200">
                        <% orders.forEach((order) => { %>
                            <tr class="order text-slate-500 bg-white">
                            <td class="px-6 py-4 whitespace-nowrap">
                                <div class="flex items-center">
                                    <div class="order-id-attribute text-sm font-medium text-slate-900"><%= order.id %></div>
                                </div>
                            </td>
                            <td class="px-6 py-4 whitespace-nowrap">
                                <div class="flex items-center">
                                    <div class="text-sm font-medium text-slate-900"><%= order.weight %></div>
                                </div>
                            </td>
                            <td class="px-6 py-4 whitespace-nowrap">
                                <% if (order.status === "DELIVERED" ) { %>
                                    <span class="status-attribute px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-100 text-green-800">
                            <%= order.status %>
                        </span>
                                <% } else if (order.status === "TRANSIT") { %>
                                    <span class="status-attribute px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-yellow-100 text-yellow-800">
                            <%= order.status %>
                        </span>
                                <% } else if (order.status === "SORTING") { %>
                                    <span class="status-attribute px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-slate-100 text-slate-800">
                            <%= order.status %>
                        </span>
                                <% } else if (order.status === "READY") { %>
                                    <span class="status-attribute px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-slate-100 text-slate-800">
                          <%= order.status %>
                      </span>
                                <% } else { %>
                                    <span class="status-attribute px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-red-100 text-red-800">
                            <%= order.status %>
                        </span>
                                <% } %>
                            </td>
                            <td class="px-6 py-4 whitespace-nowrap">
                                <div class="flex items-center">
                                    <div class="text-sm font-medium text-slate-900"><%= order.email %></div>
                                </div>
                            </td>
                            <td class="px-6 py-4 whitespace-nowrap">
                                <div class="flex items-center">
                                    <div class="text-sm font-medium text-slate-900"><%= order.phone_number %></div>
                                </div>
                            </td>
                        <% }); %>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
        <%}%>
    </div>
</div>
</body>
</html>
