<!DOCTYPE html>
<html lang="en" class="bg-slate-50">
  <head>
    <%- include("../../../partials/head", {js: "dashboard/orders/edit"}) %>
  </head>
  <body>
    <div class="flex">
      <%- include("../../../partials/dashboard/sidebar") %>
      <div class="p-10 flex-1 overflow-hidden">
          <%- include("../../../partials/breadcrumb", { links: [{ name:
        "Overview", href: "/dashboard/overview" }, {
            name: "Orders",
            href: "/dashboard/orders"
        }, { name: `Edit order #${order.id}` }] }) %>
        <div class="mt-10 bg-white rounded-xl border border-slate-200 p-8">
            <h1 class="block text-gray-800 text-2xl font-bold mb-6">Edit order #<%= order.id %></h1>
            <form name="name" id="editform" action="/api/orders/edit" method="POST">
                <input type="hidden" name="id" value="<%= order.id %>">
                <div class="flex flex-col mb-4 mx-2">
                  <label
                    class="mb-2 font-bold text-sm text-slate-900"
                    for="email"
                    >Email-Address</label
                  >
                  <input
                    class="py-2 px-3 text-slate-800 rounded-lg focus:ring-cyan-500 focus:border-cyan-500 bg-slate-50 border border-slate-200"
                    type="email"
                    name="email"
                    id="email"
                    value="<%= order.email %>"
                  />
                  <p
                class="text-red-500 text-sm"
                id="email_p"
                ></p
                >
                </div>

                <div class="flex flex-col mb-4 mx-2">
                  <label class="mb-2 font-bold text-sm text-slate-900" for="country"
                    >Address</label
                  >
                  <table class="border border-t-0 py-2 px-3 text-slate-800 rounded-lg">
                    <thead>
                      <tr>
                        <div class="relative">
                            <div class="flex absolute inset-y-0 left-0 items-center pl-3 pointer-events-none">
                                <svg xmlns="http://www.w3.org/2000/svg" viewBox="-2.5 -2.5 24 24" width="24" fill="#475569"><path d="M8 14A6 6 0 1 0 8 2a6 6 0 0 0 0 12zm6.32-1.094l3.58 3.58a1 1 0 1 1-1.415 1.413l-3.58-3.58a8 8 0 1 1 1.414-1.414z"></path></svg>
                            </div>
                            <input
                              class="bg-slate-50 border border-slate-200 text-slate-800 rounded-lg focus:ring-cyan-500 focus:border-cyan-500 block pl-10 p-2 w-full"
                              type="text"
                              name="address"
                              id="address"
                              placeholder="e.g. Wibautstraat 4"
                            />
                        </div>
                      </tr>
                    </thead>
                    <tbody id="addresses">
                    </tbody>
                  </table>
                </div>

                <div class="flex flex-col mb-4 mx-2">
                  <label
                    class="mb-2 font-bold text-sm text-slate-900"
                    for="country"
                    >Country/Origin</label
                  >
                  <input
                    class="py-2 px-3 text-slate-800 rounded-lg focus:ring-cyan-500 focus:border-cyan-500 bg-slate-50 border border-slate-200"
                    type="text"
                    name="country"
                    id="country"
                    value="<%= order.country %>"
                  />
                  <p
                  class="text-red-500 text-sm"
                  id="country_p"
                  ></p
                  >
                </div>

                <div class="flex flex-row flex-wrap justify-between grow">
                  <div class="flex flex-col mb-4 grow w-3/6 mx-2 min-w-min">
                    <label
                      class="mb-2 font-bold text-sm text-slate-900"
                      for="postal_code"
                      >Postal Code</label
                    >
                    <input
                      class="py-2 px-3 text-slate-800 rounded-lg focus:ring-cyan-500 focus:border-cyan-500 bg-slate-50 border border-slate-200"
                      type="text"
                      name="postal_code"
                      id="postal_code"
                      value="<%= order.postal_code %>"
                    />
                    <p
                    class="text-red-500 text-sm"
                    id="postal_code_p"
                    ></p
                    >
                  </div>
                  <div class="flex flex-col mb-4 grow w-1/6 mx-2 min-w-min">
                    <label
                      class="mb-2 font-bold text-sm text-slate-900"
                      for="city"
                      >City</label
                    >
                    <input
                      class="py-2 px-3 text-slate-800 rounded-lg focus:ring-cyan-500 focus:border-cyan-500 bg-slate-50 border border-slate-200"
                      type="text"
                      name="city"
                      id="city"
                      value="<%= order.city %>"
                    />
                    <p
                      class="text-red-500 text-sm"
                      id="city_p"
                      ></p
                      >
                  </div>
                </div>

                <div class="flex flex-row flex-wrap justify-between grow">
                  <div class="flex flex-col mb-4 grow w-3/6 mx-2 min-w-min">
                    <label
                      class="mb-2 font-bold text-sm text-slate-900"
                      for="street"
                      >Street</label
                    >
                    <input
                      class="py-2 px-3 text-slate-800 rounded-lg focus:ring-cyan-500 focus:border-cyan-500 bg-slate-50 border border-slate-200"
                      type="text"
                      name="street"
                      id="street"
                      value="<%= order.street %>"
                    />
                    <p
                      class="text-red-500 text-sm"
                      id="street_p"
                      ></p
                      >
                  </div>
                  <div class="flex flex-col mb-4 grow w-1/6 mx-2 min-w-min">
                    <label
                      class="mb-2 font-bold text-sm text-slate-900"
                      for="houseNumber"
                      >House number</label
                    >
                    <input
                      class="py-2 px-3 text-slate-800 rounded-lg focus:ring-cyan-500 focus:border-cyan-500 bg-slate-50 border border-slate-200"
                      type="text"
                      name="house_number"
                      id="house_number"
                      value="<%= order.house_number %>"
                    />
                    <p
                      class="text-red-500 text-sm"
                      id="house_number_p"
                      ></p
                      >
                  </div>
                </div>

                <div class="flex flex-row flex-wrap justify-between grow">
                  <div class="flex flex-col mb-4 grow w-3/6 mx-2 min-w-min">
                    <label class="mb-2 font-bold text-sm text-slate-900" for="weight">Weight in grams</label>
                    <input
                      class="py-2 px-3 text-slate-800 rounded-lg focus:ring-cyan-500 focus:border-cyan-500 bg-slate-50 border border-slate-200"
                      type="number"
                      name="weight"
                      id="weight"
                      value="<%= order.weight %>"
                    />
                      <p
                    class="text-red-500 text-sm"
                    id="weight_p"
                    ></p
                    >
                  </div>
                  <div class="flex flex-col mb-4 grow w-1/6 mx-2 min-w-min">
                    <label
                      class="mb-2 font-bold text-sm text-slate-900"
                      for="price"
                      >Price</label
                    >
                    <div class="flex">
                      <span class="inline-flex items-center px-3 text-sm text-slate-900 bg-slate-100 border border-r-0 border-slate-300 rounded-l-md">
                          â‚¬
                      </span>
                      <input type="number" name="price" id="price" class="rounded-none rounded-r-lg bg-slate-50 border border-slate-300 text-slate-900 focus:ring-cyan-500 focus:border-cyan-500 block flex-1 min-w-0 w-full text-sm p-2.5" placeholder="20.00" value="<%= order.price %>" required>
                    </div>
                    <p
                    class="text-red-500 text-sm"
                    id="price_p"
                    ></p
                    >
                  </div>
                </div>

                <div class="flex flex-col mx-2 mb-4">
                  <label
                    class="mb-2 font-bold text-sm text-slate-900"
                    for="sizeFormat"
                    >Size format</label
                  >
                  <div class="relative">
                    <select
                      class="text-slate-900 text-sm rounded-lg focus:ring-cyan-500 focus:border-cyan-500 bg-slate-50 border border-slate-200 block w-full p-2.5 appearance-none"
                      name="sizeFormat"
                      id="sizeFormat"
                    >
                    <% if(order.formatId === null) { %>
                        <option disabled selected>Select a format</option>
                    <% } %>
                     <% formats.forEach(format => { %>
                         <option value=<%= format.id %> <%= order.formatId === format.id ? "selected" : "" %>><%= format.nameformat %></option>
                     <% }); %>
                    </select>
                  </div>
                </div>

                <div class="flex flex-col mx-2 mb-4">
                  <label class="mb-2 font-bold text-sm text-slate-900" for="status">Order status</label>
                  <div class="relative">
                      <select class="border text-slate-900 text-sm rounded-lg focus:ring-cyan-500 focus:border-cyan-500 bg-slate-50 border-slate-200 block w-full p-2.5 appearance-none" name="status" id="status">
                          <option value="SORTING" <%= (order.status === "SORTING") ? "selected" : "" %>>Sorting</option>
                          <option value="READY" <%= (order.status === "READY") ? "selected" : "" %>>Ready</option>
                          <option value="TRANSIT" <%= (order.status === "TRANSIT") ? "selected" : "" %>>Transit</option>
                          <option value="DELIVERED" <%= (order.status === "DELIVERED") ? "selected" : "" %>>Delivered</option>
                          <option value="FAILED" <%= (order.status === "FAILED") ? "selected" : "" %>>Failed</option>
                      </select>
                  </div>
              </div>

                <div class="flex justify-end mb-6">
                      <div class="flex items-center h-5">
                         <input name="is_pickup" id="is_pickup" aria-describedby="is_pickup"  type="checkbox" class="w-4 h-4 text-cyan-500 bg-slate-100 rounded border-slate-300 focus:ring-cyan-500" <%= (order.is_pickup) ? "checked" : "" %>>
                       </div>
                       <div class="ml-3 text-sm" >
                            <label for="is_pickup" class="font-medium text-slate-900 dark:text-slate-300">Pickup package at store</label>
                       </div>
                  </div>

                <div class="flex justify-end">
                  <button
                    class="block bg-cyan-500 hover:bg-cyan-700 text-white text-sm py-3 px-4 w-1/4 rounded-xl transition-colors"
                    type="button"
                    id="submitButton"
                  >
                    Save
                  </button>
                </div>
              </form>

        </div>
    </div>
  </body>
</html>
